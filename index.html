<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title></title>
    <link href="/stylesheets/reset-fonts-grids.css" media="screen" rel="stylesheet" type="text/css" />
  </head>

  <body class='uniPlay'>
      <div>load player: 
          <a href='#vimeo'    class='examples vimeo'>Vimeo</a>
          <a href='#youtube'  class='examples youtube'>YouTube</a>
          <a href='#jwplayer' class='examples jwplayer'>JWPlayer</a>
      </div>
    <div id="wrapper">
        <div id="asset_container"></div>
    </div>
    <div id="play">Play</div>
    <hr />
    <ul>
        <li>timer: <span id="timer"></span></lid>
        <li>current postion: <span id="currentPosition"></span></lid>
        <li>current state: <span id="currentState"></span></lid>
    </ul>
  </body>
  <!--[if IE]>
    <script src="/javascripts/firebug-lite-compressed.js" type="text/javascript"></script>
  <![endif]-->
  <script src="/javascripts/jquery.js" type="text/javascript"></script>
  <script src="/javascripts/swfobject.js" type="text/javascript"></script>
  <script src="/src/uniPlay.js" type="text/javascript"></script>
  <script src="/src/uniPlay/Modules/JWPlayer.js" type="text/javascript"></script>
  <script src="/src/uniPlay/Modules/Vimeo.js" type="text/javascript"></script>
  <script src="/src/uniPlay/Modules/YouTube.js" type="text/javascript"></script>
  <script type="text/javascript">
     var YourScope = {};
     YourScope.examples = {
       vimeo :  { 
                 "video_id": "14533805",
                 "player": "Vimeo"
                },
       youtube : { 
                 "video_id": "OQSNhk5ICTI",
                 "player": "YouTube"
                },
       /* this is for if you have something hosted on your own*/
       jwplayer : {
                 "url": "http://s3.amazonaws.com/snitchmedia-nostalgia-transcoded/94709166a8222c9306a63665c5980259vid00002.mp4",
                 "video_id": "video_two.mp4",
                 "player": "JWPlayer"
                }

     }
     $(document).ready(function () {
        $('#play').click( function(e) {
            YourScope.yourUniPlayer.play();
        });
        $('.examples').click(function(e) {
            //TODO this must die!!
            if(UniPlay.playerInstance) {
                UniPlay.playerInstance.unload();
            }   
            var attr = $(e.target).attr('class').split(' ');
            YourScope.yourUniPlayer = UniPlay.Player.init(YourScope[attr[0]][attr[1]]);
            YourScope.yourUniPlayer.register('timer', $('#timer'));
            YourScope.yourUniPlayer.register('currentPosition',$('#currentPosition')); 
            YourScope.yourUniPlayer.register('currentState',$('#currentState')); 
        });

        // initialize if something was selected
        var picked = location.hash;
        if(picked) {
            console.log(picked);
            $('.'+picked.substring(1,picked.length)+':first').trigger('click');
        } else {
            $('.examples:first').trigger('click');
        }
     });

  </script>
</html>

